## AI Prompt

需求：用Go语言编写一个跨平台的P2P节点代理程序（p2proxy）。使得位于不同局域网的任意两个节点，通过具有公网IP的中间服务器，使用UDP打洞的方式，建立连接。后续流量不再通过中间服务器转发，两个P2P节点自行独立通信，可以代理转发彼此的网络流量。

可用参考下面的方案实现。如果有更好的方案实现可以提出。如本方案有不合理的之处，可以酌情优化调整：

1. 初始连接：通过拥有公网IP的中间服务器，使用UDP打洞，撮合P2P节点建立连接。后续P2P节点数据通讯，流量不再经过中间服务器。
2. 初始的UDP连接注册，每个节点都会注册一个ID，为P2P网络节点的唯一标识，通过此标识，可以定位到P2P节点的可用IP和端口号。
3. 在其中一方或双方搭建一个SOCKS代理服务器（例如SOCKS5），但​​此代理服务器并不直接绑定到TCP端口上对外服务，而是将其收到的TCP请求（来自本地应用程序）全部通过之前建立的可靠UDP P2P通道发送给对端​​。对端节点收到UDP数据包后，解出其中的TCP流量，再代表发起方向真正的目标服务器建立TCP连接并发送请求，最后将响应按原路返回。
